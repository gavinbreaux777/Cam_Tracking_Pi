<html>
    <head>
        <title>Really Cool Thing E's</title>
        <style>
            .grid-container {
                display: grid;
                height: 90vh;
                grid-template-columns: 10% 1fr 10%; /*repeat(3, 1fr);*/
                grid-template-rows: 10% 1fr 20%;
                grid-gap: 10px; 
                padding: 10px;
                border: 2px solid green;
                place-items: center;
            }
        </style>
    </head>

    <body>
        <h1 style="justify-content: center; text-align: center;">Cool Shit</h1>
        <div class="grid-container">
            <div style="grid-row: 2; grid-column: 2;  border: 5px dotted red; height: auto; width: 100%">
                <img src="/stream" id="stream_img" style="display:block; margin:0 auto; height: 100%; border-width: 2; border-color: black; border-style:solid;"/>
            </div>
            <div style="grid-row: 1; grid-column: 1; border-style: dotted; border-color: green;">
                <button onclick="stopStream()" id="start_stop_stream" style="margin: 0 auto;  width: 100%; height: 75%;">
                    Stop Stream
                </button>
            </div>
            
        <script>
            function stopStream(){
                const btn = document.getElementById("start_stop_stream")
                fetch('/stopStream', {
                    method: 'GET'
                    })
                    .then(response => {
                        if (response.status === 200){
                            console.log("Stream stopped. Server response = " + response.body);
                        }
                        else{
                            console.log("Failure to stop stream. Server response: " + response.status);
                        }
                    })
                    .then(data => {
                        btn.innerHTML = "Start Stream"
                        btn.onclick = startStream
                    })
                    .catch(error => {
                        console.error(error)
                    })
                }

            function startStream(){
                const btn = document.getElementById("start_stop_stream")
                const stream = document.getElementById("stream_img")
                fetch('/stream',{
                    method: 'GET'
                })
                .then(response => {
                    if (response.status === 200){
                        console.log("Stream started. Server response = " + response.body);
                        
                    }
                    else{
                        console.log("Server failed to start stream. Server response: " + server.response)
                    }
                })
                .then(data => {
                    stream.src = "/stream"
                    btn.innerHTML = "Stop Stream"
                    btn.onclick = stopStream
                })
                .catch(error => {
                    console.error(error)
                })
            }
        </script>

    </body>
</html>